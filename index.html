<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gojira TP | Professional Training Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; overflow-x: hidden; scroll-behavior: smooth; }
        .app-view { display: none; min-height: 100vh; animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .app-view.active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .step-transition { transition: all 0.3s ease; }
    </style>
</head>

<body class="bg-slate-50 text-slate-900">

<!-- BHARATLOAN SOP VIEW -->
<div id="view-bharatloan" class="app-view active bg-white">
    <header class="h-16 flex items-center justify-between px-6 border-b border-slate-100 bg-white sticky top-0 z-50">
        <button onclick="navigateTo('view-entities')" class="flex items-center gap-2 text-slate-500 hover:text-blue-600 font-bold">
            <i class="fa-solid fa-arrow-left"></i> Brand SOPs
        </button>
        <span class="font-bold text-slate-800">BharatLoan</span>
        <div class="w-10"></div>
    </header>

    <div class="max-w-6xl mx-auto px-6 py-12">
        <h1 class="text-3xl font-extrabold text-slate-900 mb-4 text-center tracking-tight">
            BharatLoan Customer Journey: Step-by-Step SOP
        </h1>

        <p class="text-slate-600 text-center max-w-4xl mx-auto mb-12 font-medium leading-relaxed">
            This document outlines the end-to-end customer journey for BharatLoan as defined in the Gojira TP training portal.
            It pairs customer actions with the necessary backend Standard Operating Procedures (SOPs).
        </p>

        <div class="bg-slate-50 rounded-[3rem] border border-slate-100 p-8 shadow-sm">
            <!-- STEPS -->
            <div class="relative flex justify-between mb-12">
                <div class="absolute top-1/2 left-0 w-full h-1 bg-slate-200 -translate-y-1/2 z-0"></div>

                <div class="relative z-10 flex flex-col items-center cursor-pointer" onclick="showStep(1)">
                    <div id="circle-1" class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold mb-2 ring-4 ring-white">1</div>
                    <span class="text-[9px] font-bold text-slate-400 uppercase">Register</span>
                </div>
                <div class="relative z-10 flex flex-col items-center cursor-pointer" onclick="showStep(2)">
                    <div id="circle-2" class="w-10 h-10 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center font-bold mb-2 ring-4 ring-white">2</div>
                    <span class="text-[9px] font-bold text-slate-400 uppercase">KYC</span>
                </div>
                <div class="relative z-10 flex flex-col items-center cursor-pointer" onclick="showStep(3)">
                    <div id="circle-3" class="w-10 h-10 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center font-bold mb-2 ring-4 ring-white">3</div>
                    <span class="text-[9px] font-bold text-slate-400 uppercase">Finance</span>
                </div>
                <div class="relative z-10 flex flex-col items-center cursor-pointer" onclick="showStep(4)">
                    <div id="circle-4" class="w-10 h-10 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center font-bold mb-2 ring-4 ring-white">4</div>
                    <span class="text-[9px] font-bold text-slate-400 uppercase">Select</span>
                </div>
                <div class="relative z-10 flex flex-col items-center cursor-pointer" onclick="showStep(5)">
                    <div id="circle-5" class="w-10 h-10 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center font-bold mb-2 ring-4 ring-white">5</div>
                    <span class="text-[9px] font-bold text-slate-400 uppercase">Sign</span>
                </div>
                <div class="relative z-10 flex flex-col items-center cursor-pointer" onclick="showStep(6)">
                    <div id="circle-6" class="w-10 h-10 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center font-bold mb-2 ring-4 ring-white">6</div>
                    <span class="text-[9px] font-bold text-slate-400 uppercase">Verify</span>
                </div>
                <div class="relative z-10 flex flex-col items-center cursor-pointer" onclick="showStep(7)">
                    <div id="circle-7" class="w-10 h-10 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center font-bold mb-2 ring-4 ring-white">7</div>
                    <span class="text-[9px] font-bold text-slate-400 uppercase">Disbursal</span>
                </div>
            </div>

            <!-- CONTENT -->
            <div id="step-content" class="bg-white border border-slate-100 rounded-3xl p-8 step-transition shadow-sm">
                <h3 id="step-title" class="text-2xl font-black text-slate-900 mb-6"></h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-xs font-bold text-blue-600 uppercase tracking-widest mb-3">Customer Activity</h4>
                        <p id="customer-action" class="text-slate-600 font-medium leading-relaxed"></p>
                    </div>
                    <div>
                        <h4 class="text-xs font-bold text-blue-600 uppercase tracking-widest mb-3">Backend SOP</h4>
                        <ul id="backend-process" class="space-y-3"></ul>
                    </div>
                </div>
            </div>

            <!-- NOTES -->
            <div class="mt-10 border-t pt-6 text-slate-600">
                <h4 class="font-bold mb-2">Key Operational Notes</h4>
                <ul class="list-disc ml-6 text-sm space-y-1">
                    <li>Most steps are automated to ensure instant approval.</li>
                    <li>If a customer stalls at Step 3 or Step 5, the Support/Collections team may assist.</li>
                    <li>Timely repayment is critical to maintain a healthy CIBIL score.</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
const journeyData = {
    1: {
        title: "Step 1: Registration",
        action: "The customer visits the portal and enters their mobile number. They receive and enter an OTP (One-Time Password) to verify their identity.",
        process: [
            "System triggers an automated OTP via the gateway.",
            "Validation of user identity and active session management.",
            "Capture of initial lead metadata (device info, timestamp, referral source)."
        ]
    },
    2: {
        title: "Step 2: KYC Submission",
        action: "The customer uploads their National ID (Aadhaar/PAN) and performs a live selfie capture for biometric matching.",
        process: [
            "Automated OCR extracts data from the ID.",
            "Liveness check performed to prevent spoofing or fraud.",
            "Cross-referencing with UIDAI / IT Department databases."
        ]
    },
    3: {
        title: "Step 3: Financial Verification",
        action: "The customer connects their primary bank account through an Account Aggregator or uploads digital bank statements.",
        process: [
            "Automated flow analysis of the last 6 months of transactions.",
            "Calculation of Debt-to-Income (DTI) ratio.",
            "Triggering of the internal risk scoring engine."
        ]
    },
    4: {
        title: "Step 4: Loan Selection",
        action: "Based on the approved limit shown, the customer selects the loan amount and preferred repayment tenure.",
        process: [
            "Real-time EMI generation using current interest rates.",
            "Validation against the maximum risk threshold.",
            "Generation of the digital Sanction Letter."
        ]
    },
    5: {
        title: "Step 5: E-Sign Agreement",
        action: "The customer reviews the digital loan agreement and signs it electronically (Aadhaar-based e-Sign).",
        process: [
            "Generation of a legally binding digital contract.",
            "Timestamping and secure document storage.",
            "Triggering e-Mandate (NACH) setup for repayments."
        ]
    },
    6: {
        title: "Step 6: Final Verification",
        action: "The customer may receive a verification call or be asked to confirm final bank account details.",
        process: [
            "Human-in-the-loop or automated compliance audit.",
            "Bank account ownership verification (Penny-drop).",
            "AML and blacklist checks."
        ]
    },
    7: {
        title: "Step 7: Disbursal",
        action: "The customer receives confirmation and the loan amount is credited to their bank account.",
        process: [
            "IMPS/NEFT payment gateway triggered.",
            "Loan status updated to Active in CBS.",
            "Automated SMS/Email with repayment schedule."
        ]
    }
};

function showStep(stepId) {
    const data = journeyData[stepId];
    document.getElementById("step-title").innerText = data.title;
    document.getElementById("customer-action").innerText = data.action;

    const list = document.getElementById("backend-process");
    list.innerHTML = "";
    data.process.forEach(p => {
        list.innerHTML += `<li class="flex gap-2 text-slate-600 text-sm">
            <i class="fa-solid fa-check text-blue-500 mt-1"></i>${p}
        </li>`;
    });

    for (let i = 1; i <= 7; i++) {
        const c = document.getElementById(`circle-${i}`);
        if (i < stepId) {
            c.className = "w-10 h-10 rounded-full bg-emerald-500 text-white flex items-center justify-center font-bold mb-2 ring-4 ring-white";
            c.innerHTML = '<i class="fa-solid fa-check"></i>';
        } else if (i === stepId) {
            c.className = "w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold mb-2 ring-4 ring-white";
            c.innerHTML = i;
        } else {
            c.className = "w-10 h-10 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center font-bold mb-2 ring-4 ring-white";
            c.innerHTML = i;
        }
    }
}

showStep(1);
</script>

</body>
</html>
